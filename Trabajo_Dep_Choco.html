<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="es" xml:lang="es"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.43">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Yamid Campo">
<meta name="author" content="Luis Paredes">
<meta name="author" content="Yolian Rodriguez">

<title>Trabajo grupal, Departamento: Chocó.</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="Trabajo_Dep_Choco_files/libs/clipboard/clipboard.min.js"></script>
<script src="Trabajo_Dep_Choco_files/libs/quarto-html/quarto.js"></script>
<script src="Trabajo_Dep_Choco_files/libs/quarto-html/popper.min.js"></script>
<script src="Trabajo_Dep_Choco_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="Trabajo_Dep_Choco_files/libs/quarto-html/anchor.min.js"></script>
<link href="Trabajo_Dep_Choco_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="Trabajo_Dep_Choco_files/libs/quarto-html/quarto-syntax-highlighting-d4d76bf8491c20bad77d141916dc28e1.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="Trabajo_Dep_Choco_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="Trabajo_Dep_Choco_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="Trabajo_Dep_Choco_files/libs/bootstrap/bootstrap-1bc8a17f135ab3d594c857e9f48e611b.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">


</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Tabla de contenidos</h2>
   
  <ul>
  <li><a href="#objetivos-del-trabajo" id="toc-objetivos-del-trabajo" class="nav-link active" data-scroll-target="#objetivos-del-trabajo">Objetivos del trabajo</a></li>
  <li><a href="#introducción" id="toc-introducción" class="nav-link" data-scroll-target="#introducción">Introducción</a></li>
  <li><a href="#mapa-de-indice-de-pobreza-municipal-mpm" id="toc-mapa-de-indice-de-pobreza-municipal-mpm" class="nav-link" data-scroll-target="#mapa-de-indice-de-pobreza-municipal-mpm">Mapa De Indice de Pobreza Municipal (MPM)</a></li>
  <li><a href="#mapa-de-indice-de-desenpeño-fiscal-idf" id="toc-mapa-de-indice-de-desenpeño-fiscal-idf" class="nav-link" data-scroll-target="#mapa-de-indice-de-desenpeño-fiscal-idf">Mapa De Indice de Desenpeño Fiscal (IDF)</a></li>
  <li><a href="#mapa-de-distancia-de-los-municipios." id="toc-mapa-de-distancia-de-los-municipios." class="nav-link" data-scroll-target="#mapa-de-distancia-de-los-municipios.">Mapa De Distancia de los Municipios.</a></li>
  <li><a href="#interpretación-general" id="toc-interpretación-general" class="nav-link" data-scroll-target="#interpretación-general">Interpretación general</a></li>
  <li><a href="#concluiones" id="toc-concluiones" class="nav-link" data-scroll-target="#concluiones">Concluiones</a></li>
  <li><a href="#recomendación" id="toc-recomendación" class="nav-link" data-scroll-target="#recomendación">Recomendación</a></li>
  <li><a href="#biografía" id="toc-biografía" class="nav-link" data-scroll-target="#biografía">Biografía</a></li>
  </ul>
<div class="quarto-alternate-formats"><h2>Otros formatos</h2><ul><li><a href="Trabajo_Dep_Choco.pdf"><i class="bi bi-file-pdf"></i>PDF</a></li></ul></div></nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Trabajo grupal, Departamento: Chocó.</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Autores/as</div>
    <div class="quarto-title-meta-contents">
             <p>Yamid Campo </p>
             <p>Luis Paredes </p>
             <p>Yolian Rodriguez </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Fecha de publicación</div>
    <div class="quarto-title-meta-contents">
      <p class="date">1 de julio de 2025</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="objetivos-del-trabajo" class="level1">
<h1>Objetivos del trabajo</h1>
<p>Haciendo uso de bases de datos, buscaremos obtener interpretación gráfica por medio de mapas de distintas variables relacionadas a los municipios del departamento del Chocó.</p>
</section>
<section id="introducción" class="level1">
<h1>Introducción</h1>
<p>A continuación, se presenta un trabajo de estadística descriptiva y análisis exploratorio de datos, donde exploraremos las variables índices de pobreza, índice de desempeño fiscal y la distancia de los municipios a la capital del departamento del Chocó, por medio de mapas gráficos que nos permite visualizar mucho más claro como es el desempeño de los distintos municipios del departamento. Se hará uso del lenguaje de programación R y tres bases de datos en total para el desarrollo del trabajo.</p>
<p>En primer lugar tenemos, MGM_ADM_MPIO_GRAFICO, que corresponde a los datos de geometría de los municipios de los departamentos de Colombia, ResultadosIDF_Nueva_Metodologia_2023, que corresponde a los datos de Índice de Desempeño Fiscal de los municipios de Colombia y, por último, MPM_FuenteCensal_2018 que corresponde a los datos de Índice de pobreza Multidimensional Municipal. Buscamos que se pueda observar de manera gráfica algún comportamiento particular por medio de estas variables.</p>
<div class="cell">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Trabajo_Dep_Choco_files/figure-html/unnamed-chunk-2-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption>Mapa De Municipios del Departamento del Chocó</figcaption>
</figure>
</div>
</div>
</div>
<div style="page-break-after: always;"></div>
</section>
<section id="mapa-de-indice-de-pobreza-municipal-mpm" class="level1">
<h1>Mapa De Indice de Pobreza Municipal (MPM)</h1>
<p>El índice de pobreza multidimensional total municipal: Para empezar, tuvimos que obtener la base de datos de Pobreza multidimensional Municipal en la página del DANE, desde el Geovisor de pobreza multidimensional municipal, accediendo a un mapa interactivo que desde ahí nos permitía la descarga, y obtuvimos la base de datos llamada MPM_FuenteCensal_2018, donde teníamos varios archivos, pero con el que trabajamos fue el .shp. En segundo lugar, la metodología que utilizamos para este primer mapa fue, cargar el archivo .shp con ayuda de la librería Sf, y filtrar por el departamento del Chocó para obtener los datos de los municipios de este departamento que son los que nos competen. Por último, haciendo uso de la librería Tmap, graficamos los municipios del departamento por medio de la variable MPM, que corresponde al índice de pobreza multidimensional. Por suerte, no tuvimos que hacer tratamientos a los datos, ya que el código de los municipios y sus polígonos eran correctos.</p>
<div class="cell">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Trabajo_Dep_Choco_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption>Mapa De Indice de Pobreza</figcaption>
</figure>
</div>
</div>
</div>
<p>El mapa presenta el Índice de Pobreza Multidimensional (MPM) en los municipios del departamento del Chocó, según datos del DANE (2018). Este índice refleja múltiples dimensiones de la pobreza —educación, salud, condiciones de vida, entre otras— y permite identificar no solo la incidencia de la pobreza, sino su intensidad. A partir de la visualización, se observa que la mayoría de los municipios del Chocó presentan niveles elevados de pobreza, con valores que oscilan entre el 60 % y el 100 %. Particularmente, los municipios ubicados en zonas periféricas del departamento tienden a tener índices más altos, lo que puede sugerir una correlación negativa entre accesibilidad geográfica y condiciones de vida. Estos resultados evidencian la persistencia de desigualdades territoriales profundas en la región.</p>
<div style="page-break-after: always;"></div>
</section>
<section id="mapa-de-indice-de-desenpeño-fiscal-idf" class="level1">
<h1>Mapa De Indice de Desenpeño Fiscal (IDF)</h1>
<p>Antes de poder realizar los mapas 2 y 3, tuvimos que acceder al Geoportal de DANE para poder descargar el archivo con todos los municipios de Colombia que tiene dentro de este los polígonos que nos permite realizar los gráficos, el archivo que usamos fue Versión MGN2024-Nivel Municipio, que dentro de este lleva MGM_ADM_MPIO_GRAFICO.shp, que es el que cargaremos al R para graficar. El nombre que le pondremos a esta nueva base de datos con los datos filtrados por los municipios del departamento del Chocó será municipios_chocó.</p>
<p>El índice de desempeño fiscal municipal: Respecto a este mapa, en primer lugar tuvimos que obtener la base de datos desde la página del Departamento Nacional de Planeación, accediendo a la dirección de descentralización y fortalecimiento fiscal, donde hay una pestaña que nos lleva a la subdirección de fortalecimiento fiscal territorial y desde ahí, acceder a desempeño fiscal, donde están los diferentes resultados para distintos años, usamos el del 2023 ya que era el más actualizado, al descargar el archivo Anexo Resultados IDF 2023, obtuvimos le archivo ResultadosIDF_Nueva_Metodologia_2023 que corresponde a un xlsx.</p>
<p>En segundo lugar, tuvimos que hace uso de la librería readxl para cargar los datos del xlsx, filtramos todas los datos por el departamento del Chocó, cambiamos el nombre de la variable del código del municipio para que coincidan con la respectiva variable de la base de datos MGM_ADM_MPIO_GRAFICO.shp, para así hacer un Left Join que nos permite llevar la variable IDF a la base de datos municipios_chocó, para finalizar con su gráfico haciendo uso de Tmap.</p>
<div style="page-break-after: always;"></div>
<div class="cell">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Trabajo_Dep_Choco_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption>Mapa De Indice de Desempeño Fiscal (IDF)</figcaption>
</figure>
</div>
</div>
</div>
<p>El mapa corresponde al Índice de Desempeño Fiscal (IDF), obtenido a partir de datos del Departamento Nacional de Planeación (2023). Este índice mide la eficiencia financiera de los gobiernos locales, considerando variables como la capacidad de recaudo, el nivel de endeudamiento, la ejecución presupuestal y la dependencia de transferencias nacionales. El análisis espacial revela una gran heterogeneidad en el desempeño fiscal entre los municipios. Algunos municipios como Istmina, Tadó o Condoto presentan valores relativamente altos de IDF (superiores a 65 puntos), lo cual puede estar asociado a una mejor gestión administrativa o a una mayor capacidad institucional. En contraste, municipios como Bojayá, Medio Baudó o Bajo Baudó presentan desempeños fiscales muy bajos, inferiores a 30 puntos. Este contraste puede deberse a múltiples factores estructurales: bajos ingresos tributarios propios, debilidad institucional, falta de personal calificado o contextos de conflicto y exclusión histórica. La relación entre pobreza y desempeño fiscal merece especial atención, ya que en algunos casos coinciden altos niveles de pobreza con baja capacidad fiscal, lo que perpetúa un círculo de subdesarrollo territorial.</p>
<div style="page-break-after: always;"></div>
</section>
<section id="mapa-de-distancia-de-los-municipios." class="level1">
<h1>Mapa De Distancia de los Municipios.</h1>
<p>En este apartado nos interesaba mostrar la distancia que presenta cada uno de los municipios del departamento del <strong><em>Chocó</em></strong> con respecto a la capital del mismo departamento <strong><em>Quibdó</em></strong></p>
<p>La distancia de los municipios a la capital, una vez teníamos la base de datos municipos_choco, se guardan en un objetivo los centroides de cada municipio, y seguido a esto, se calcula la distancia entre centroides de los demás municipios respecto a la capital del departamento que es Quibdó, para finalizar con su gráfico.</p>
<div class="cell">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Trabajo_Dep_Choco_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption>Mapa De Distancia de Municipios del Chocó a la Capital del Departamento (Quibdó)</figcaption>
</figure>
</div>
</div>
</div>
<p>El mapa muestra la distancia entre cada municipio del Chocó y la capital departamental, Quibdó, medida a través de los centroides municipales. Este análisis permite evaluar la accesibilidad territorial y la conectividad, aspectos clave para la provisión de servicios públicos y la integración regional. Los resultados indican que existe una gran dispersión geográfica, con municipios ubicados a más de 200 km de la capital (e.g., Acandí y Unguía), muchos de ellos en zonas costeras o fronterizas. Estas largas distancias, sumadas a la deficiente infraestructura vial del departamento, pueden implicar altos costos de transporte, dificultades logísticas y barrera de acceso a servicios básicos (educación, salud, justicia, etc.). Asimismo, esta variable puede estar relacionada indirectamente con los dos indicadores anteriores. Municipios más alejados tienden a presentar mayores niveles de pobreza y menores índices de desempeño fiscal, lo cual sugiere que la distancia territorial podría ser un factor estructural de exclusión y limitación en el acceso a oportunidades.</p>
<div style="page-break-after: always;"></div>
</section>
<section id="interpretación-general" class="level1">
<h1>Interpretación general</h1>
<p>La lectura conjunta de los tres mapas permite evidenciar una relación estructural entre pobreza, desempeño fiscal y distancia geográfica. Los municipios más pobres suelen ser los más aislados y los que cuentan con menor capacidad administrativa para generar desarrollo local. Este análisis espacial resalta la necesidad de implementar políticas públicas territorialmente diferenciadas, que reconozcan las barreras físicas y estructurales que enfrentan las regiones apartadas como el Chocó.</p>
</section>
<section id="concluiones" class="level1">
<h1>Concluiones</h1>
<p>Mediante el uso de técnicas de análisis exploratorio de datos y representación cartográfica en R, las profundas desigualdades territoriales que caracterizan al departamento del Chocó. A través del estudio del Índice de Pobreza Multidimensional, el Índice de Desempeño Fiscal y las distancias geográficas hacia la capital Quibdó, se identificaron patrones espaciales que reflejan la concentración de la pobreza, la debilidad institucional y el aislamiento territorial en numerosos municipios. Los resultados revelan que los municipios más alejados de la capital tienden a presentar mayores niveles de pobreza y menor capacidad fiscal, lo cual sugiere una relación directa entre geografía, exclusión social y limitaciones administrativas. Esta situación pone de manifiesto la necesidad de diseñar políticas públicas diferenciadas, con enfoque territorial, que prioricen la inversión en infraestructura, fortalecimiento institucional y reducción de brechas sociales. En definitiva, los datos demuestran el valor del análisis estadístico geoespacial como herramienta fundamental para diagnosticar problemáticas regionales complejas y contribuir a la formulación de estrategias de desarrollo más equitativas y sostenibles.</p>
</section>
<section id="recomendación" class="level1">
<h1>Recomendación</h1>
<p>Se recomienda continuar y profundizar este tipo de análisis estadístico-geoespacial en futuras investigaciones, incorporando nuevas variables y métodos cuantitativos que permitan una comprensión más integral de las dinámicas territoriales en regiones con altos niveles de desigualdad como el Chocó. Los resultados obtenidos evidencian la necesidad de orientar las políticas públicas hacia un enfoque territorialmente diferenciado, priorizando a los municipios más aislados y vulnerables. Para ello, es fundamental fortalecer las capacidades institucionales locales, mejorar la conectividad regional y establecer sistemas de monitoreo permanente basados en datos actualizados y herramientas estadísticas replicables.</p>
<div style="page-break-after: always;"></div>
</section>
<section id="biografía" class="level1">
<h1>Biografía</h1>
<p><a href="https://geoportal.dane.gov.co/servicios/descarga-y-metadatos/datos-geoestadisticos/">Geoportal del Dane, para acceder a los polígonos</a></p>
<p><a href="https://www.dane.gov.co/index.php/estadisticas-por-tema/pobreza-y-condiciones-de-vida">Mapa del dane sobre pobreza y condiciones de vida</a></p>
<p><a href="https://dane.maps.arcgis.com/home/item.html?id=bb63fb9c6bc84cbeb2399e77ff20f504">Pagina de descarga de mapa interactivo</a></p>
<p><a href="https://www.dnp.gov.co/LaEntidad_/subdireccion-general-descentralizacion-desarrollo-territorial/direccion-descentralizacion-fortalecimiento-fiscal/Paginas/informacion-fiscal-y-financiera.aspx">IndiceDe Desempeño Fiscal(IDF)</a></p>

</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography" id="quarto-bibliography"><h2 class="anchored quarto-appendix-heading">Referencias</h2><div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-R-rmarkdown" class="csl-entry" role="listitem">
Allaire, JJ, Yihui Xie, Christophe Dervieux, Jonathan McPherson, Javier Luraschi, Kevin Ushey, Aron Atkins, et&nbsp;al. 2023. <em>rmarkdown: Dynamic Documents for R</em>. <a href="https://github.com/rstudio/rmarkdown">https://github.com/rstudio/rmarkdown</a>.
</div>
<div id="ref-knitr2014" class="csl-entry" role="listitem">
Xie, Yihui. 2014. <span>«knitr: A Comprehensive Tool for Reproducible Research in <span>R</span>»</span>. En <em>Implementing Reproducible Computational Research</em>, editado por Victoria Stodden, Friedrich Leisch, y Roger D. Peng. Chapman; Hall/CRC.
</div>
<div id="ref-knitr2015" class="csl-entry" role="listitem">
———. 2015. <em>Dynamic Documents with <span>R</span> and knitr</em>. 2nd ed. Boca Raton, Florida: Chapman; Hall/CRC. <a href="https://yihui.org/knitr/">https://yihui.org/knitr/</a>.
</div>
<div id="ref-R-knitr" class="csl-entry" role="listitem">
———. 2023. <em>knitr: A General-Purpose Package for Dynamic Report Generation in R</em>. <a href="https://yihui.org/knitr/">https://yihui.org/knitr/</a>.
</div>
<div id="ref-rmarkdown2018" class="csl-entry" role="listitem">
Xie, Yihui, J. J. Allaire, y Garrett Grolemund. 2018. <em>R Markdown: The Definitive Guide</em>. Boca Raton, Florida: Chapman; Hall/CRC. <a href="https://bookdown.org/yihui/rmarkdown">https://bookdown.org/yihui/rmarkdown</a>.
</div>
<div id="ref-rmarkdown2020" class="csl-entry" role="listitem">
Xie, Yihui, Christophe Dervieux, y Emily Riederer. 2020. <em>R Markdown Cookbook</em>. Boca Raton, Florida: Chapman; Hall/CRC. <a href="https://bookdown.org/yihui/rmarkdown-cookbook">https://bookdown.org/yihui/rmarkdown-cookbook</a>.
</div>
</div></section></div></main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copiado");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copiado");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>